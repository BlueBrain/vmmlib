#include "cp3_tensor_test.hpp"
#include <vmmlib/cp3_tensor.hpp>
#include <sstream>

namespace vmml
{
	
	bool
	cp3_tensor_test::run()
	{
		bool ok = false;
		
		//FIXME: test for reconstruction
		//same test data s in tensor3.reconstruct_CP()
		
		typedef tensor3< 4, 4, 4, double > cp_t3_type;
		cp_t3_type t3_cp_reco_check;
		double data_out_cp[] = { 
			0.354263061197741, 0.336071353932582, 0.340120155317465, 0.148789058227363,
			0.335156282115524, 0.284369809600727, 0.270075906182746, 0.127689570299207,
			0.248778281916907, 0.271657788743462, 0.293346312353042, 0.118870461584074,
			0.347767704804178, 1.119919940137974, 1.528048459613556, 0.399390301753092,
			
			0.241873571540868, 0.267325817660143, 0.334780629072782, 0.301651586726927,
			0.277064331887503, 0.253524404359242, 0.282150329524853, 0.268828551075853,
			0.208805038309086, 0.198138779535580, 0.228624285742602, 0.217032724171575,
			0.925152576629409, 0.641979031363691, 0.446794524932619, 0.178096907232692,
			
			0.408959960261278, 0.458603477148098, 0.565021279854640, 0.533195254992912,
			0.300410894904167, 0.426297991808946, 0.575920757418752, 0.513247731493541,
			0.303903577435438, 0.299195909145241, 0.360430286717156, 0.385593403984964,
			0.559935740903585, 0.298948990808052, 0.267704058359116, 0.313877703199338,
			
			0.334349191835064, 0.331983603647059, 0.392220714079066, 0.406517347684063,
			0.234640418580267, 0.303232696231040, 0.405821982955168, 0.393611395358567,
			0.239172809919676, 0.216514108351268, 0.254464520462408, 0.296451592996035,
			0.276358969906296, 0.233761715518065, 0.311620024949421, 0.277319482627673 };
		t3_cp_reco_check.set(data_out_cp, data_out_cp + 64);
		log( "TODO: cp3 tensor reconstruction ", false  );
		
		
		return ok;
	}
	
	
} // namespace vmml